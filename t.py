import copy

import numpy as np

from match import getClean

if __name__ == '__main__':
    line_change = [[], [[[3, 10139, 0.3405654728412628, [10124, 10144], 0, 1650011645330, 12.60740718326612],
               [3, 10064, 0.13949069380760193, [10059, 10069], 0, 1650011643641, 10.741138560687432],
               [2, 10043, 0.7333535552024841, [10038, 10048], 0, 1650011645330, 12.275725098131119]],
              [2, 10084, 0.22605231404304504, [10079, 10089], 0, 1650011645519, 10.741138560687432],
              [[3, 10169, 0.19110257923603058, [10159, 10174], 0, 1650011647958, 13.228522707516463],
               [2, 10104, 0.25650927424430847, [10094, 10109], 0, 1650011647393, 10.463650881595704],
               [2, 10074, 0.9266793131828308, [10064, 10079], 0, 1650011647958, 13.746484764694682],
               [2, 10028, 2.657069206237793, [10018, 10038], 1, 1650011647958, 19.788918205804748]],
              [3, 10119, 0.29912176728248596, [10114, 10129], 0, 1650011648140, 10.463650881595704]], [
             [[3, 10290, 0.09578075259923935, [10275, 10295], 0, 1650011656585, 14.02594798667268],
              [3, 10230, 0.11634785681962967, [10225, 10235], 0, 1650011656585, 12.698363403209472],
              [2, 10179, 0.35421663522720337, [10169, 10184], 0, 1650011656020, 11.351018775646963],
              [2, 10144, 4.4186530113220215, [10129, 10149], 1, 1650011656585, 17.409020803654467],
              [3, 10124, 0.3116191625595093, [10119, 10129], 0, 1650011656585, 5]],
             [1, 10220, 1.1168086528778076, [10215, 10230], 1, 1650011658273, 19.54906336465526],
             [1, 10220, 1.1168086528778076, [10215, 10230], 1, 1650011658458, 17.774449635983324],
             [1, 10220, 1.1168086528778076, [10215, 10230], 1, 1650011658651, 14.32463012428348],
             [1, 10220, 1.1168086528778076, [10215, 10230], 1, 1650011658835, 11.269853438412795],
             [1, 10235, 1.148952841758728, [10225, 10245], 1, 1650011659390, 10.472609457173128],
             [1, 10235, 1.148952841758728, [10225, 10245], 1, 1650011659584, 11.628250594440185],
             [1, 10240, 1.0685679912567139, [10230, 10245], 1, 1650011659770, 12.922786507140081],
             [1, 10240, 1.0685679912567139, [10230, 10245], 1, 1650011659962, 14.388007567735238],
             [1, 10240, 1.0685679912567139, [10230, 10245], 1, 1650011660143, 14.229042202402136]], [
             [[3, 10300, 0.19038139283657074, [10285, 10305], 0, 1650011657709, 13.430770702090191],
              [3, 10255, 0.21142543852329254, [10250, 10260], 0, 1650011658273, 14.004395969411986],
              [1, 10220, 1.1168086528778076, [10215, 10230], 1, 1650011658458, 14.32463012428348],
              [2, 10169, 1.0518559217453003, [10159, 10174], 1, 1650011658458, 17.10870890962608],
              [3, 10149, 0.22204670310020447, [10144, 10154], 0, 1650011658458, 13.237557260367844]],
             [3, 10230, 0.8016175627708435, [10210, 10235], 0, 1650011662023, 12.86447286841995]], []]
    time_remove_list = []
    print("gg", line_change)
    for time_index in range(len(line_change[i])):
        if time_index > 0 and new_record_v[i][_t] - line_change[i][time_index][_t] > 2000:  # 大于2s移掉的
            time_remove_list.append(time_index)
    print("%%%%%%%", time_remove_list)
    print("%%%%%%%", line_change)
    for time_remove in time_remove_list:
        line_change[i].remove(line_change[i][time_remove])
    print("%%%", line_change)
    line_change[i].append(copy.deepcopy(new_record_v[i]))
    if new_record_v[i][_t] - line_change[i][0][i][_t] > 10000:
        print("变道时间超过了10s仍符合条件，清空此次变道信息")
        line_change[i] = []
    print("^^^^^")